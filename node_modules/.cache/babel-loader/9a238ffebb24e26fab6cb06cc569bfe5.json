{"remainingRequest":"H:\\graduations\\booksalon\\node_modules\\babel-loader\\lib\\index.js!H:\\graduations\\booksalon\\node_modules\\eslint-loader\\index.js??ref--14-0!H:\\graduations\\booksalon\\src\\request.js","dependencies":[{"path":"H:\\graduations\\booksalon\\src\\request.js","mtime":1648385014524},{"path":"H:\\graduations\\booksalon\\babel.config.js","mtime":1648030698105},{"path":"H:\\graduations\\booksalon\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648030651680},{"path":"H:\\graduations\\booksalon\\node_modules\\babel-loader\\lib\\index.js","mtime":1648030692076},{"path":"H:\\graduations\\booksalon\\node_modules\\eslint-loader\\index.js","mtime":1648030652325}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiSDovZ3JhZHVhdGlvbnMvYm9va3NhbG9uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKCmZ1bmN0aW9uIGh0dHBSZXF1ZXN0KF9zZWxmLCBjb25maWcsIGNhbGxiYWNrLCBfY29tcGxldGUpIHsKICBpZiAoY29uZmlnLm1ldGhvZCA9PT0gJ2dldCcgJiYgY29uZmlnLmRhdGEpIHsKICAgIHZhciB1cmwgPSBjb25maWcudXJsICsgJz8nOwoKICAgIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnLmRhdGEpOyBfaSA8IF9PYmplY3Qka2V5cy5sZW5ndGg7IF9pKyspIHsKICAgICAgdmFyIHByb3BOYW1lID0gX09iamVjdCRrZXlzW19pXTsKICAgICAgdmFyIHZhbHVlID0gY29uZmlnLmRhdGFbcHJvcE5hbWVdOwogICAgICB2YXIgcGFydCA9IGVuY29kZVVSSUNvbXBvbmVudChwcm9wTmFtZSkgKyAiPSI7CgogICAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIGlmIChfdHlwZW9mKHZhbHVlKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgIGZvciAodmFyIF9pMiA9IDAsIF9PYmplY3Qka2V5czIgPSBPYmplY3Qua2V5cyh2YWx1ZSk7IF9pMiA8IF9PYmplY3Qka2V5czIubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgICB2YXIga2V5ID0gX09iamVjdCRrZXlzMltfaTJdOwogICAgICAgICAgICB2YXIgcGFyYW1zID0gcHJvcE5hbWUgKyAnWycgKyBrZXkgKyAnXSc7CiAgICAgICAgICAgIHZhciBzdWJQYXJ0ID0gZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtcykgKyAiPSI7CiAgICAgICAgICAgIHVybCArPSBzdWJQYXJ0ICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlW2tleV0pICsgIiYiOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB1cmwgKz0gcGFydCArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgKyAiJiI7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgdXJsID0gdXJsLnNsaWNlKDAsIC0xKTsKICAgIGNvbmZpZy5kYXRhID0ge307CiAgICBjb25maWcudXJsID0gdXJsOwogIH0KCiAgdmFyIGFzeW5jID0gdHJ1ZTsKCiAgaWYgKHR5cGVvZiBjb25maWcuYXN5bmMgPT09ICJib29sZWFuIikgewogICAgYXN5bmMgPSBjb25maWcuYXN5bmM7CiAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKCgogICQuYWpheCh7CiAgICB1cmw6IGNvbmZpZy51cmwsCiAgICB0eXBlOiBjb25maWcudHlwZSwKICAgIGRhdGE6IGNvbmZpZy5kYXRhLAogICAgZGF0YVR5cGU6ICJqc29uIiwKICAgIGFzeW5jOiBhc3luYywKICAgIGNvbnRlbnRUeXBlOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsCiAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKHJlcykgewogICAgICAvLyDmnKrorr7nva7nirbmgIHnoIHliJnpu5jorqTmiJDlip/nirbmgIEKICAgICAgdmFyIGNvZGUgPSByZXMuY29kZSB8fCAyMDA7IC8vIOiOt+WPlumUmeivr+S/oeaBrwoKICAgICAgdmFyIG1zZyA9IHJlcy5tc2cgfHwgJ+aTjeS9nOWksei0pSc7CgogICAgICBpZiAoY29kZSA9PT0gNTAwKSB7CiAgICAgICAgX3NlbGYuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIG1lc3NhZ2U6ICLmk43kvZzlpLHotKUiCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoY29kZSAhPT0gMjAwKSB7CiAgICAgICAgX3NlbGYuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIG1lc3NhZ2U6IG1zZwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICBjYWxsYmFjayhyZXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiY2FsbGJhY2sgPT0gdW5kZWZpbmVkIik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKHJlcykgewogICAgICAvLyBjb25zb2xlLmxvZyh0eXBlb2YgX3NlbGYuJG1lc3NhZ2UpCiAgICAgIHZhciBtc2cgPSAi57O757uf5byC5bi477yM6K+36IGU57O7566h55CG5ZGYIjsKCiAgICAgIGlmIChyZXMuc3RhdHVzID09PSA0MDQpIHsKICAgICAgICBtc2cgPSAiSFRUUCBTdGF0dXMgNDA0IOKAkyBOb3QgRm91bmQiOwogICAgICB9CgogICAgICBfc2VsZi4kbWVzc2FnZSh7CiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBtZXNzYWdlOiBtc2cKICAgICAgfSk7CiAgICB9LAogICAgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKCkgewogICAgICBpZiAodHlwZW9mIF9jb21wbGV0ZSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICBfY29tcGxldGUoKTsKICAgICAgfQogICAgfQogIH0pOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgaHR0cFJlcXVlc3Q6IGh0dHBSZXF1ZXN0Cn07"},{"version":3,"sources":["H:/graduations/booksalon/src/request.js"],"names":["httpRequest","_self","config","callback","complete","method","data","url","Object","keys","propName","value","part","encodeURIComponent","key","params","subPart","slice","async","$","ajax","type","dataType","contentType","success","res","code","msg","$message","message","console","log","error","status"],"mappings":"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","sourcesContent":["\r\nfunction httpRequest(_self, config, callback, complete) {\r\n    if(config.method === 'get' && config.data) {\r\n        let url = config.url + '?';\r\n        for(const propName of Object.keys(config.data)) {\r\n            const value = config.data[propName];\r\n            let part = encodeURIComponent(propName) + \"=\";\r\n            if(value !== null && typeof (value) !== \"undefined\") {\r\n                if(typeof value === 'object') {\r\n                    for(const key of Object.keys(value)) {\r\n                        let params = propName + '[' + key + ']';\r\n                        let subPart = encodeURIComponent(params) + \"=\";\r\n                        url += subPart + encodeURIComponent(value[key]) + \"&\";\r\n                    }\r\n                } else {\r\n                    url += part + encodeURIComponent(value) + \"&\";\r\n                }\r\n            }\r\n        }\r\n        url = url.slice(0, -1);\r\n        config.data = {};\r\n        config.url = url;\r\n    }\r\n    let async = true;\r\n    if(typeof (config.async) === \"boolean\" ){\r\n        async = config.async;\r\n    }\r\n\r\n    // eslint-disable-next-line no-undef\r\n    $.ajax({\r\n        url: config.url,\r\n        type: config.type,\r\n        data: config.data,\r\n        dataType: \"json\",\r\n        async: async,\r\n        contentType: \"application/json; charset=utf-8\",\r\n        success: function (res) {\r\n            // 未设置状态码则默认成功状态\r\n            const code = res.code || 200;\r\n            // 获取错误信息\r\n            const msg = res.msg || '操作失败'\r\n            if (code === 500) {\r\n                _self.$message({\r\n                    type: 'error',\r\n                    message: \"操作失败\"\r\n                });\r\n            } else if (code !== 200) {\r\n                _self.$message({\r\n                    type: 'error',\r\n                    message: msg\r\n                });\r\n            } else {\r\n                if(typeof (callback) !== \"undefined\"){\r\n                    callback(res)\r\n                } else {\r\n                    console.log(\"callback == undefined\")\r\n                }\r\n            }\r\n        },\r\n        error: function (res) {\r\n            // console.log(typeof _self.$message)\r\n            let msg = \"系统异常，请联系管理员\";\r\n            if(res.status === 404){\r\n                msg = \"HTTP Status 404 – Not Found\";\r\n            }\r\n            _self.$message({\r\n                type: 'error',\r\n                message: msg\r\n            });\r\n        },\r\n        complete:function(){\r\n            if(typeof (complete) !== \"undefined\"){\r\n                complete();\r\n            }\r\n        }\r\n    })\r\n\r\n}\r\nexport default {\r\n    httpRequest\r\n}"]}]}